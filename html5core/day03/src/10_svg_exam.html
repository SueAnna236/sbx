<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    body{text-align: center}
    svg{
      background-color: #dddddd;
    }
  </style>
</head>
<body>
  <!-- 练习：在画布上随机绘制30个矩形，大小随机，位置随机，颜色随机，透明度随机，点击某个矩形后，它慢慢变大变淡，直至消失-从DOM树上删除 -->
  <svg id="s3" width="500" height="400">
  </svg>
  <script>
    // 1：创建画布
    var s3 = document.getElementById("s3");
    // 2：创建循环 30次
    for(var i=0;i<30;i++){
      // 3：创建矩形
      var rect = document.createElementNS("http://www.w3.org/2000/svg","rect");
      // 3.1：随机颜色、大小、位置、透明度
      var rn = function(min,max){
        var n = Math.random()*(max-min)+min;
        return Math.floor(n);
      }
      var rc =function(min,max){
        var r = rn(min,max);
        var g = rn(min,max);
        var b = rn(min,max);
        return `rgb(${r},${g},${b})`;
      }
      rect.setAttribute("x",rn(0,500));
      rect.setAttribute("y",rn(0,400));
      rect.setAttribute("fill",rc(0,255));
      //rect.setAttribute("stroke",rc(0,255));
      rect.setAttribute("width",rn(5,100));
      rect.setAttribute("height",rn(3,80));
      rect.setAttribute("fill-opacity",Math.random().toFixed(2));
      //rect.setAttribute("stroke-opacity",Math.random().toFixed(2))
      // 4：添加画布
      s3.appendChild(rect);
      // 4.1：为矩形添加点击事件
      rect.onclick = function(){
        // 小技巧：阻止当前元素再次被点击
        this.onclick = null;
        // 4.2：慢慢的变大变淡
        var t = setInterval(()=>{
          var w = this.getAttribute("width");
          var h = this.getAttribute("height");
          var p = this.getAttribute("fill-opacity");
          w *= 1.05;
          h *= 1.05;
          p *=0.8;
          this.setAttribute("width",w);
          this.setAttribute("height",h);
          this.setAttribute("fill-opacity",p);
          // 4.3：消失
          if(p < 0.01 ){
            clearInterval(t);
            s3.removeChild(this);
          }
        },100);
      }
    }
  </script>
  
</body>
</html>